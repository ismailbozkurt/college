\subsection{Sobre el heap}
\label{sec:heap_theory_introduccion}

El \textit{heap} es la región de memoria que utilizan los programas para almacenar aquellos datos de los cuales, en un principio, no se sabe su tamaño.

Debido a que no se conoce el tamaño de los datos en tiempo de compilación, el programador debe pedir espacio para dichos datos con ciertas instrucciones que proporciona el sistema operativo. Del mismo modo, el programador debe estipular cuando se puede liberar el espacio reservado para los datos. Todo este proceso ocurre en tiempo de ejecución, que es cuando se conoce el tamaño de los datos a almacenar. \bigskip

Dado que el tamaño de los datos no es conocido de antemano, no es posible utilizar estructuras de datos tales como los \textit{stack frames}\footnote{Conceptos como \textit{stack} o \textit{stack frame} se han tratado en la investigación citada en el apartado \ref{sec:related_work}.}. Es por esta razón que para gestionar el almacenamiento de dichos datos es necesario un conjunto de algoritmos mucho más complejos. Este conjunto de algoritmos son los que se encargan de lo que se conoce como la gestión de memoria dinámica. Cabe destacar que se habla de memoria dinámica debido a que el tamaño de los datos almacenados en el \textit{heap} puede variar en cualquier momento, ya sea aumentando o reduciendo su tamaño o almacenando y eliminando otros datos. \bigskip

Todas estas funcionalidades están implementadas en una librería llamada \textit{glibc} o \textit{GNU C Library}\footnote{http://www.gnu.org/software/libc/libc.html} que, como su nombre indica, es la librería estándar de lenguaje C de GNU\footnote{http://www.gnu.org/}. Esta librería se acostumbra a utilizar en sistemas GNU o sistemas que incorporen un núcleo Linux. La \textit{glibc} implementa muchas de las funcionalidades que los programadores o el propio sistema operativo utilizan continuamente. Funciones como \textit{printf()} o las llamadas al sistema\footnote{El concepto de llamada al sistema o \textit{syscall} se ha tratado en la investigación citada en el apartado \ref{sec:related_work}} están implementadas en la \textit{glibc}. En un principio la gestión de la memoria dinámica que se implementaba en la librería \textit{glibc} estaba basada en el código implementado por \textit{Doug Lea} y se conocía coloquialmente como \textit{dlmalloc}\footnote{Información sobre \textit{dlmalloc}: \url{http://g.oswego.edu/dl/html/malloc.html}}, sin embargo, a partir de la versión 2.3.x de la \textit{glibc} se incluyó una nueva implementación llevada a cabo por Wolfram Gloger basada en la implementación ya existente de \textit{Doug Lea} pero con soporte para procesos con más de un hilo o \textit{thread}. Esta nueva implementación se conoció como \textit{ptmalloc} y es la que se estudiará en esta investigación.\footnote{Información sobre \textit{ptmalloc}: \url{http://www.malloc.de/en/}}\bigskip

Lo que importa es que los algoritmos utilizados en el \textit{heap} y las funciones para almacenar, redimensionar o liberar datos están implementadas en la \textit{glibc}. Así que esta librería es la que se estudiará a continuación. Recalcar que en esta investigación se utiliza la versión de la librería 2.12.1. Dicha versión es la que se encuentra en el sistema operativo Ubuntu 10.10. Para conocer cual es la versión de \textit{glibc} de un sistema operativo con núcleo Linux basta con ejecutar el siguiente comando en la \textit{shell}: \lstinline !/lib/libc.so.6! \bigskip

Así pues, en los próximos apartados se detallará el funcionamiento de los algoritmos encargados de gestionar el almacenamiento de datos en el \textit{heap}.\bigskip